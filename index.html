<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt RPS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for Inter font and general layout */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f8fafc; /* Tailwind gray-50 */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to start for better scrolling */
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        .container {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 1rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-xl */
            width: 100%;
            max-width: 800px;
            box-sizing: border-box; /* Ensure padding is included in width */
        }
        .form-group {
            margin-bottom: 1rem;
            padding: 1rem;
            border: 1px solid #e2e8f0; /* Tailwind gray-200 */
            border-radius: 0.5rem; /* rounded-lg */
            background-color: #f1f5f9; /* Tailwind gray-100 */
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600; /* semibold */
            color: #1e293b; /* Tailwind slate-800 */
        }
        .form-group input[type="text"],
        .form-group input[type="number"] {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #cbd5e1; /* Tailwind slate-300 */
            border-radius: 0.375rem; /* rounded-md */
            box-sizing: border-box;
            font-size: 0.875rem; /* text-sm */
            color: #334155; /* Tailwind slate-700 */
        }
        .form-group .flex-inputs {
            display: flex;
            gap: 0.5rem; /* Space between code and description inputs */
        }
        .form-group .flex-inputs input {
            flex: 1; /* Make inputs take equal width */
        }
        .btn {
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem; /* rounded-lg */
            font-weight: 600; /* semibold */
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .btn-primary {
            background-color: #3b82f6; /* Tailwind blue-500 */
            color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2), 0 2px 4px -1px rgba(59, 130, 246, 0.1);
        }
        .btn-primary:hover {
            background-color: #2563eb; /* Tailwind blue-600 */
            transform: translateY(-1px);
        }
        .btn-secondary {
            background-color: #64748b; /* Tailwind slate-500 */
            color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(100, 116, 139, 0.2), 0 2px 4px -1px rgba(100, 116, 139, 0.1);
        }
        .btn-secondary:hover {
            background-color: #475569; /* Tailwind slate-600 */
            transform: translateY(-1px);
        }
        .btn-danger {
            background-color: #ef4444; /* Tailwind red-500 */
            color: #ffffff;
            box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.2), 0 2px 4px -1px rgba(239, 68, 68, 0.1);
        }
        .btn-danger:hover {
            background-color: #dc2626; /* Tailwind red-600 */
            transform: translateY(-1px);
        }
        .checkbox-group {
            display: flex;
            flex-direction: column; /* Stack checkboxes vertically */
            gap: 0.75rem;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            justify-content: space-between; /* Space out checkbox and input */
            padding: 0.5rem 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            background-color: #f1f5f9;
        }
        .checkbox-item input[type="checkbox"] {
            margin-right: 0.5rem;
            height: 1.25rem;
            width: 1.25rem;
            accent-color: #3b82f6; /* Accent color for checkboxes */
        }
        .checkbox-item label {
            margin-bottom: 0; /* Override default label margin */
            display: flex; /* Allow label and checkbox to align */
            align-items: center;
            flex-grow: 1; /* Allow label to take available space */
            cursor: pointer;
        }
        .checkbox-item .percentage-input {
            width: 80px; /* Fixed width for percentage input */
            margin-left: 1rem; /* Space between label and input */
            text-align: right;
            -moz-appearance: textfield; /* Hide arrows on Firefox */
        }
        .checkbox-item .percentage-input::-webkit-outer-spin-button,
        .checkbox-item .percentage-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0; /* Hide arrows on Chrome, Safari, Edge */
        }
        textarea {
            width: 100%;
            height: 200px;
            padding: 1rem;
            border: 1px solid #cbd5e1;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            resize: vertical;
            background-color: #f8fafc;
            color: #334155;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
                border-radius: 0.75rem;
            }
            .form-group {
                padding: 0.75rem;
            }
            .form-group .flex-inputs {
                flex-direction: column;
                gap: 0.75rem;
            }
            .btn {
                padding: 0.625rem 1rem;
                font-size: 0.875rem;
            }
            .checkbox-group {
                gap: 0.75rem;
            }
            .checkbox-item {
                padding: 0.75rem;
                flex-direction: row; /* Keep checkbox and input in a row */
            }
            .checkbox-item .percentage-input {
                width: 60px; /* Adjust width for mobile */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-center mb-6 text-slate-800">Generator Prompt RPS</h1>
        <p class="text-center text-slate-600 mb-8">Isi detail di bawah untuk menghasilkan prompt RPS berbasis OBE.</p>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <div class="form-group">
                <label for="mata-kuliah">1. Mata Kuliah:</label>
                <input type="text" id="mata-kuliah" placeholder="Nama Mata Kuliah (contoh: Pemrograman Web)" class="p-2 border rounded-md">
            </div>
        </div>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <div class="form-group">
                <label for="sks">2. SKS:</label>
                <input type="number" id="sks" placeholder="Jumlah SKS (contoh: 3)" min="1" class="p-2 border rounded-md">
            </div>
        </div>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <div class="form-group">
                <label for="semester">3. Semester:</label>
                <input type="text" id="semester" placeholder="Semester (contoh: Ganjil 2024/2025)" class="p-2 border rounded-md">
            </div>
        </div>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">4. Capaian Pembelajaran Lulusan (CPL) yang dibebankan pada MK</h2>
            <div id="cpl-container">
                <div class="form-group flex-col md:flex-row flex items-center gap-2">
                    <input type="text" placeholder="Kode CPL (contoh: CPL-1)" class="w-full md:w-1/3 p-2 border rounded-md">
                    <input type="text" placeholder="Keterangan CPL" class="w-full md:w-2/3 p-2 border rounded-md">
                    <button type="button" class="btn btn-danger text-sm px-3 py-2" onclick="removeFormField(this)">Hapus</button>
                </div>
            </div>
            <button type="button" class="btn btn-primary mt-4" onclick="addFormField('cpl-container', 'CPL')">Tambah CPL</button>
        </div>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">5. Capaian Pembelajaran Mata Kuliah (CPMK)</h2>
            <div id="cpmk-container">
                <div class="form-group flex-col md:flex-row flex items-center gap-2">
                    <input type="text" placeholder="Kode CPMK (contoh: CPMK-1)" class="w-full md:w-1/3 p-2 border rounded-md">
                    <input type="text" placeholder="Keterangan CPMK" class="w-full md:w-2/3 p-2 border rounded-md">
                    <button type="button" class="btn btn-danger text-sm px-3 py-2" onclick="removeFormField(this)">Hapus</button>
                </div>
            </div>
            <button type="button" class="btn btn-primary mt-4" onclick="addFormField('cpmk-container', 'CPMK')">Tambah CPMK</button>
        </div>

        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">6. Sub-CPMK</h2>
            <div id="subcpmk-container">
                <div class="form-group flex-col md:flex-row flex items-center gap-2">
                    <input type="text" placeholder="Kode Sub-CPMK (contoh: Sub-CPMK-1)" class="w-full md:w-1/3 p-2 border rounded-md">
                    <input type="text" placeholder="Keterangan Sub-CPMK" class="w-full md:w-2/3 p-2 border rounded-md">
                    <button type="button" class="btn btn-danger text-sm px-3 py-2" onclick="removeFormField(this)">Hapus</button>
                </div>
            </div>
            <button type="button" class="btn btn-primary mt-4" onclick="addFormField('subcpmk-container', 'Sub-CPMK')">Tambah Sub-CPMK</button>
        </div>
        
        <div class="mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">7. Bahan Kajian</h2>
            <div id="bahan-kajian-container">
                <div class="form-group flex-col md:flex-row flex items-center gap-2">
                    <input type="text" placeholder="Bahan Kajian" class="w-full p-2 border rounded-md">
                    <button type="button" class="btn btn-danger text-sm px-3 py-2" onclick="removeFormField(this)">Hapus</button>
                </div>
            </div>
            <button type="button" class="btn btn-primary mt-4" onclick="addBahanKajian()">Tambah Bahan Kajian</button>
        </div>

        <div class="mb-8 p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">8. Kriteria Penilaian (masukkan persentase bobot)</h2>
            <div class="checkbox-group">
                <div class="checkbox-item">
                    <label for="penilaian-aktifitas">
                        <input type="checkbox" id="penilaian-aktifitas" name="penilaian" value="Aktivitas Partisipatif" onchange="togglePercentageInput(this)">
                        <span>Aktivitas Partisipatif</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Aktivitas Partisipatif">
                </div>
                <div class="checkbox-item">
                    <label for="penilaian-proyek">
                        <input type="checkbox" id="penilaian-proyek" name="penilaian" value="Hasil Proyek" onchange="togglePercentageInput(this)">
                        <span>Hasil Proyek</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Hasil Proyek">
                </div>
                <div class="checkbox-item">
                    <label for="penilaian-kuis">
                        <input type="checkbox" id="penilaian-kuis" name="penilaian" value="Kuis" onchange="togglePercentageInput(this)">
                        <span>Kuis</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Kuis">
                </div>
                <div class="checkbox-item">
                    <label for="penilaian-tugas">
                        <input type="checkbox" id="penilaian-tugas" name="penilaian" value="Tugas" onchange="togglePercentageInput(this)">
                        <span>Tugas</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Tugas">
                </div>
                <div class="checkbox-item">
                    <label for="penilaian-uts">
                        <input type="checkbox" id="penilaian-uts" name="penilaian" value="Ujian Tengah Semester" onchange="togglePercentageInput(this)">
                        <span>Ujian Tengah Semester</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Ujian Tengah Semester">
                </div>
                <div class="checkbox-item">
                    <label for="penilaian-uas">
                        <input type="checkbox" id="penilaian-uas" name="penilaian" value="Ujian Akhir Semester" onchange="togglePercentageInput(this)">
                        <span>Ujian Akhir Semester</span>
                    </label>
                    <input type="number" placeholder="%" min="0" max="100" class="percentage-input hidden p-2 border rounded-md" data-label="Ujian Akhir Semester">
                </div>
            </div>
        </div>

        <div class="text-center mb-8">
            <button type="button" class="btn btn-primary text-lg px-6 py-3" onclick="generatePrompt()">
                Buat Prompt RPS
            </button>
        </div>

        <div class="p-4 border border-gray-200 rounded-lg bg-gray-50 shadow-sm">
            <h2 class="text-xl font-semibold mb-4 text-slate-700">Prompt RPS Siap Pakai:</h2>
            <textarea id="generated-prompt" readonly class="text-sm"></textarea>
            <div class="flex justify-end mt-4">
                <button type="button" class="btn btn-secondary text-sm" onclick="copyPrompt()">Salin Prompt</button>
            </div>
        </div>
    </div>

    <script>
        // Function to add a new form field (CPL, CPMK, Sub-CPMK)
        function addFormField(containerId, type) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = 'form-group flex-col md:flex-row flex items-center gap-2'; // Tailwind classes for styling

            // Create input for code
            const codeInput = document.createElement('input');
            codeInput.type = 'text';
            codeInput.placeholder = `Kode ${type} (contoh: ${type}-X)`;
            codeInput.className = 'w-full md:w-1/3 p-2 border rounded-md'; // Tailwind classes for styling

            // Create input for description
            const descInput = document.createElement('input');
            descInput.type = 'text';
            descInput.placeholder = `Keterangan ${type}`;
            descInput.className = 'w-full md:w-2/3 p-2 border rounded-md'; // Tailwind classes for styling

            // Create remove button
            const removeButton = document.createElement('button');
            removeButton.type = 'button';
            removeButton.className = 'btn btn-danger text-sm px-3 py-2'; // Tailwind classes for styling
            removeButton.textContent = 'Hapus';
            removeButton.onclick = function() {
                removeFormField(this);
            };

            div.appendChild(codeInput);
            div.appendChild(descInput);
            div.appendChild(removeButton);
            container.appendChild(div);
        }

        // New function to add a "Bahan Kajian" field
        function addBahanKajian() {
            const container = document.getElementById('bahan-kajian-container');
            const div = document.createElement('div');
            div.className = 'form-group flex-col md:flex-row flex items-center gap-2'; // Tailwind classes for styling

            // Create input for Bahan Kajian
            const input = document.createElement('input');
            input.type = 'text';
            input.placeholder = 'Bahan Kajian';
            input.className = 'w-full p-2 border rounded-md'; // Tailwind classes for styling

            // Create remove button
            const removeButton = document.createElement('button');
            removeButton.type = 'button';
            removeButton.className = 'btn btn-danger text-sm px-3 py-2'; // Tailwind classes for styling
            removeButton.textContent = 'Hapus';
            removeButton.onclick = function() {
                removeFormField(this);
            };

            div.appendChild(input);
            div.appendChild(removeButton);
            container.appendChild(div);
        }

        // Function to remove a form field
        function removeFormField(buttonElement) {
            buttonElement.closest('.form-group').remove();
        }

        // Function to toggle the visibility of the percentage input
        function togglePercentageInput(checkbox) {
            const percentageInput = checkbox.closest('.checkbox-item').querySelector('.percentage-input');
            if (checkbox.checked) {
                percentageInput.classList.remove('hidden');
                percentageInput.value = ''; // Clear previous value
                percentageInput.focus();
            } else {
                percentageInput.classList.add('hidden');
                percentageInput.value = ''; // Clear value when hidden
            }
        }

        // Function to generate the complete prompt
        function generatePrompt() {
            let prompt = `Saya ingin kamu bertindak sebagai seorang Dosen Pengembang RPS profesional yang membuat Rencana Pembelajaran Semester.\n\nRencana Pembelajaran Semester (RPS) berbasis OBE (Outcome-Based Education) harus mencakup beberapa unsur penting, termasuk identitas mata kuliah, deskripsi mata kuliah, bahan kajian, Pustaka Utama dan pendukung. Selain itu, buatkan dalam bentuk tabel Rencana Kegiatan Belajar Mengajar seperti dibawah ini,\n1.minggu ke\n2. Kemampuan akhir tiap tahapan belajar (sub-cmpk isinya)\n3. penilaian indicator\n4. penilaian Teknik & kriteria\n5. Bentuk Pembelajaran\n6. metode pembelajaran\n7. penugasan mahasiswa dan estimasi Waktu (opsional)\n8. Materi Pembelajaran\n9. Bobot Penilaian\n\nRPS berbasis OBE juga harus memuat pengalaman belajar mahasiswa yang berpusat pada peserta didik dan berorientasi pada hasil, serta metode pembelajaran yang beragam dan fleksibel.:\n\n`;

            // 1. Mata Kuliah
            const mataKuliah = document.getElementById('mata-kuliah').value.trim();
            if (mataKuliah) {
                prompt += `1. Mata Kuliah: ${mataKuliah}\n`;
            }

            // 2. SKS
            const sks = document.getElementById('sks').value.trim();
            if (sks) {
                prompt += `2. SKS: ${sks}\n`;
            }

            // 3. Semester
            const semester = document.getElementById('semester').value.trim();
            if (semester) {
                prompt += `3. Semester: ${semester}\n`;
            }

            // 4. Capaian Pembelajaran Lulusan (CPL)
            const cplInputs = document.querySelectorAll('#cpl-container .form-group');
            if (cplInputs.length > 0) {
                prompt += "4. Capaian Pembelajaran Lulusan (CPL) yang dibebankan pada MK:\n";
                cplInputs.forEach(group => {
                    const code = group.children[0].value.trim();
                    const desc = group.children[1].value.trim();
                    if (code || desc) {
                        prompt += `- ${code}${desc ? `: ${desc}` : ''}\n`;
                    }
                });
                prompt += "\n";
            }

            // 5. Capaian Pembelajaran Mata Kuliah (CPMK)
            const cpmkInputs = document.querySelectorAll('#cpmk-container .form-group');
            if (cpmkInputs.length > 0) {
                prompt += "5. Capaian Pembelajaran Mata Kuliah (CPMK):\n";
                cpmkInputs.forEach(group => {
                    const code = group.children[0].value.trim();
                    const desc = group.children[1].value.trim();
                    if (code || desc) {
                        prompt += `- ${code}${desc ? `: ${desc}` : ''}\n`;
                    }
                });
                prompt += "\n";
            }

            // 6. Sub-CPMK
            const subCpmkInputs = document.querySelectorAll('#subcpmk-container .form-group');
            if (subCpmkInputs.length > 0) {
                prompt += "6. Sub-CPMK:\n";
                subCpmkInputs.forEach(group => {
                    const code = group.children[0].value.trim();
                    const desc = group.children[1].value.trim();
                    if (code || desc) {
                        prompt += `- ${code}${desc ? `: ${desc}` : ''}\n`;
                    }
                });
                prompt += "\n";
            }
            
            // 7. Bahan Kajian (new)
            const bahanKajianInputs = document.querySelectorAll('#bahan-kajian-container .form-group input[type="text"]');
            if (bahanKajianInputs.length > 0) {
                prompt += "7. Bahan Kajian:\n";
                bahanKajianInputs.forEach(input => {
                    const value = input.value.trim();
                    if (value) {
                        prompt += `- ${value}\n`;
                    }
                });
                prompt += "\n";
            }

            // Bagian di dalam function generatePrompt()

// 8. Kriteria Penilaian
const penilaianCheckboxes = document.querySelectorAll('input[name="penilaian"]');
let penilaianItems = [];
penilaianCheckboxes.forEach(checkbox => {
    if (checkbox.checked) {
        const percentageInput = checkbox.closest('.checkbox-item').querySelector('.percentage-input');
        const percentage = percentageInput.value.trim();
        const label = checkbox.value;
        if (percentage) {
            penilaianItems.push({basis: label, bobot: percentage});
        } else {
            penilaianItems.push({basis: label, bobot: ""});
        }
    }
});

if (penilaianItems.length > 0) {
    prompt += "8. Kriteria Penilaian (dalam bentuk tabel evaluasi):\n\n";
    prompt += "| Basis Evaluasi | Komponen Evaluasi | Sub CPMK | Deskripsi % Indikator | Metode Penilaian | Bobot |\n";
    prompt += "|----------------|-------------------|----------|------------------------|------------------|-------|\n";

    penilaianItems.forEach(item => {
        prompt += `| ${item.basis} | (isi komponen di sini) | (Sub-CPMK terkait) | (Deskripsi indikator ${item.bobot}%) | (Metode, contoh: tes/tugas/observasi) | ${item.bobot}% |\n`;
    });

    prompt += "\n";
}


            document.getElementById('generated-prompt').value = prompt;
        }

        // Function to copy the generated prompt to clipboard
        function copyPrompt() {
            const promptTextarea = document.getElementById('generated-prompt');
            promptTextarea.select();
            document.execCommand('copy');
            // Using a simple alert, consider a custom modal for better UX
            alert('Prompt berhasil disalin ke clipboard!');
        }
    </script>
</body>
</html>
